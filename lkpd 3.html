<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>LKPD Interaktif: Dekomposisi Koding (Fase C)</title>
  <style>
    :root{--bg:#f7f9fc;--card:#ffffff;--accent:#1167b1;--muted:#5b6b7a}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;background:var(--bg);margin:0;padding:24px;color:#1f2937}
    .container{max-width:880px;margin:0 auto}
    header{display:flex;gap:16px;align-items:center;margin-bottom:18px}
    header h1{margin:0;font-size:20px}
    .card{background:var(--card);border-radius:12px;padding:18px;box-shadow:0 6px 18px rgba(17,23,34,0.06);margin-bottom:16px}
    label{display:block;font-weight:600;margin-bottom:6px}
    textarea,input,select{width:100%;padding:10px;border-radius:8px;border:1px solid #e2e8f0;background:#fff}
    button{background:var(--accent);color:white;padding:10px 14px;border-radius:8px;border:0;cursor:pointer}
    .muted{color:var(--muted);font-size:14px}
    .droppable{min-height:48px;border:2px dashed #cfe3fb;border-radius:8px;padding:8px;background:linear-gradient(180deg,#fafcff,#fff)}
    .draggable{padding:8px 10px;border-radius:8px;background:#eef6ff;border:1px solid #d0e7ff;margin:6px 0;cursor:grab}
    .draggable[draggable="true"]:active{cursor:grabbing}
    .controls{display:flex;gap:8px;flex-wrap:wrap}
    .small{font-size:13px;padding:6px 10px}
    .danger{background:#d9534f}
    .rubric{font-size:14px}
    .btn-ghost{background:transparent;color:var(--accent);border:1px solid #dbeafe}
    footer{margin-top:18px;text-align:center;color:#6b7280;font-size:13px}
    @media print{.no-print{display:none}}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div style="width:56px;height:56px;border-radius:10px;background:linear-gradient(135deg,#cfe3fb,#b3d6ff);display:flex;align-items:center;justify-content:center;font-weight:700;color:#083b66">LKPD</div>
      <div>
        <h1>LKPD Interaktif: <span style="color:var(--accent)">Dekomposisi Koding (Fase C)</span></h1>
        <div class="muted">Versi untuk peserta didik — tanpa panel pengajar</div>
      </div>
    </header>

    <main>
      <section class="card">
        <h2>Petunjuk Umum</h2>
        <p class="muted">Gunakan LKPD ini untuk mempraktikkan <strong>dekomposisi</strong> dalam berpikir komputasional. Bacalah tugas, pecah langkah-langkahnya, susun urutan, dan tulis pseudocode.</p>
      </section>

      <section class="card">
        <h3>1) Pilih Latihan</h3>
        <div style="display:flex;gap:8px;margin-bottom:8px">
          <select id="exerciseSelect">
            <option value="membuat_teh">Membuat secangkir teh</option>
            <option value="mencuci_tangan">Mencuci tangan dengan sabun</option>
            <option value="mengantar_surat">Mengantar surat ke rumah tetangga</option>
            <option value="menyusun_kerusi">Menyusun 5 kursi di kelas</option>
            <option value="robot_maju">Robot maju dan belok</option>
          </select>
          <button id="loadExercise" class="small">Muat Latihan</button>
          <button id="printButton" class="small btn-ghost">Cetak LKPD</button>
        </div>
        <div id="exerciseDesc" class="muted"></div>
      </section>

      <section class="card">
        <h3>2) Pecah Masalah</h3>
        <p class="muted">Seret langkah dari kolom kiri ke kanan, susun sesuai urutan logis.</p>
        <div style="display:flex;gap:12px">
          <div style="flex:1">
            <label>Langkah yang bisa digunakan</label>
            <div id="bank" class="droppable"></div>
            <div style="margin-top:8px;display:flex;gap:8px">
              <input id="newStepInput" placeholder="Tambah langkah sendiri..." />
              <button id="addStep" class="small">+</button>
            </div>
          </div>
          <div style="width:300px">
            <label>Urutan Langkah</label>
            <div id="sequence" class="droppable"></div>
            <div style="margin-top:8px;display:flex;gap:8px">
              <button id="checkSequence" class="small">Periksa</button>
              <button id="clearSequence" class="small danger">Kosongkan</button>
            </div>
          </div>
        </div>
      </section>

      <section class="card">
        <h3>3) Tulis Pseudocode</h3>
        <textarea id="pseudocode" rows="6" placeholder="Tulis pseudocode di sini..."></textarea>
        <div style="margin-top:8px;display:flex;gap:8px">
          <button id="saveProgress" class="small">Simpan</button>
          <button id="downloadJSON" class="small">Unduh</button>
          <button id="clearAll" class="small danger">Hapus</button>
        </div>
      </section>

      <section class="card">
        <h3>4) Refleksi</h3>
        <p class="muted">Bagian mana yang mudah dan mana yang perlu dipecah lagi?</p>
        <div class="rubric">
          <ul>
            <li><strong>3</strong> — Langkah lengkap & urutan logis</li>
            <li><strong>2</strong> — Ada beberapa langkah utama</li>
            <li><strong>1</strong> — Perlu bimbingan</li>
          </ul>
        </div>
      </section>
    </main>

    <footer>© LKPD Dekomposisi Fase C | Untuk kegiatan Bimtek guru</footer>
  </div>

  <script>
    const exercises = {
      "membuat_teh": {title:"Membuat secangkir teh",desc:"Buat langkah-langkah rinci untuk membuat teh."},
      "mencuci_tangan": {title:"Mencuci tangan dengan sabun",desc:"Langkah dari mengambil sabun hingga mengeringkan tangan."},
      "mengantar_surat": {title:"Mengantar surat ke rumah tetangga",desc:"Langkah dari menulis surat sampai menyerahkan."},
      "menyusun_kerusi": {title:"Menyusun 5 kursi di kelas",desc:"Langkah-langkah merapikan kursi."},
      "robot_maju": {title:"Robot maju dan belok",desc:"Perintah untuk robot bergerak maju 3 langkah, belok kanan, lalu maju lagi."}
    };

    const bank=document.getElementById('bank'),seq=document.getElementById('sequence'),desc=document.getElementById('exerciseDesc');

    function loadExercise(key){
      desc.textContent=exercises[key].title+' — '+exercises[key].desc;
      const steps=['Siapkan bahan','Rebus air','Masukkan bahan utama','Tuang ke wadah','Aduk atau olah','Sajikan'];
      if(key==='robot_maju')steps.push('Maju 1 langkah','Belok kanan','Ulangi 3 kali');
      bank.innerHTML='';steps.forEach(t=>{let d=document.createElement('div');d.textContent=t;d.className='draggable';d.draggable=true;bank.appendChild(d);});
      attachDrag();
    }

    function attachDrag(){document.querySelectorAll('.draggable').forEach(el=>el.addEventListener('dragstart',e=>{e.dataTransfer.setData('text/plain',el.textContent);}));}
    seq.addEventListener('dragover',e=>e.preventDefault());
    seq.addEventListener('drop',e=>{e.preventDefault();const t=e.dataTransfer.getData('text/plain');if(t){let d=document.createElement('div');d.className='draggable';d.draggable=true;d.textContent=t;seq.appendChild(d);attachDrag();}});

    document.getElementById('addStep').onclick=()=>{const val=document.getElementById('newStepInput').value.trim();if(val){let d=document.createElement('div');d.textContent=val;d.className='draggable';d.draggable=true;bank.appendChild(d);document.getElementById('newStepInput').value='';attachDrag();}};

    document.getElementById('loadExercise').onclick=()=>loadExercise(document.getElementById('exerciseSelect').value);
    document.getElementById('checkSequence').onclick=()=>{const c=seq.children.length;alert(c>=5?'Bagus, sudah minimal 5 langkah!':'Coba pecah lagi agar lebih detail (min. 5 langkah).');};
    document.getElementById('clearSequence').onclick=()=>seq.innerHTML='';
    document.getElementById('saveProgress').onclick=()=>{const data={exercise:document.getElementById('exerciseSelect').value,sequence:[...seq.children].map(n=>n.textContent),pseudocode:document.getElementById('pseudocode').value};localStorage.setItem('lkpd_fasec',JSON.stringify(data));alert('Tersimpan!');};
    document.getElementById('downloadJSON').onclick=()=>{const data={exercise:document.getElementById('exerciseSelect').value,sequence:[...seq.children].map(n=>n.textContent),pseudocode:document.getElementById('pseudocode').value};const blob=new Blob([JSON.stringify(data,null,2)],{type:'application/json'});const a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download='lkpd_fasec.json';a.click();};
    document.getElementById('clearAll').onclick=()=>{if(confirm('Hapus semua?')){seq.innerHTML='';document.getElementById('pseudocode').value='';localStorage.removeItem('lkpd_fasec');}};
    document.getElementById('printButton').onclick=()=>window.print();

    window.onload=()=>{loadExercise('membuat_teh');const saved=localStorage.getItem('lkpd_fasec');if(saved){const d=JSON.parse(saved);document.getElementById('exerciseSelect').value=d.exercise||'membuat_teh';loadExercise(d.exercise);if(d.sequence)d.sequence.forEach(s=>{let div=document.createElement('div');div.className='draggable';div.draggable=true;div.textContent=s;seq.appendChild(div);});if(d.pseudocode)document.getElementById('pseudocode').value=d.pseudocode;}}
  </script>
</body>
</html>
